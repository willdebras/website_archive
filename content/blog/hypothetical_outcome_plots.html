---
title: "Hypothetical Outcome Plots"
author: "Will Bonnell"
date: 2020-02-05
categories: ["R"]
tags: ["ggplot2", "dataviz", "gganimate", "uncertainty"]
---



<div id="the-uncertainty-of-uncertainty" class="section level1">
<h1>The Uncertainty of Uncertainty</h1>
<p>Conveying uncertainty in data visualisations has become a growing topic in data visualisation circles in the past few years. When considering how to visualise data, one must consider who their audience is and how that audience might interpret a visualisation. In the same way writers adopt different styles of writing to convey information to different audiences, dataviz practioners might choose color, layout, or typography to suit different audiences (e.g. making a color palette color blind friendly or right-aligning a visualization designed for <a href="https://en.wikipedia.org/wiki/Right-to-left">RTL-writing</a> communities. The options a dataviz practitioner has though are not limited only to the aesthetic design choices. The practitioner’s decision to use a certain type of visualisation itself is contingent on the audience’s ability to understand it.</p>
<p>This is especially true when visualising the uncertainty we as researchers know exist. While a statistician or analyst in your company or academic department might understand the error bars on a bar chart you send them, the average person might not. This has prompted discussion about ways we visualise uncertainty.</p>
</div>
<div id="how-we-historically-visualise-uncertainty" class="section level1">
<h1>How We Historically Visualise Uncertainty</h1>
<p>Conventionally, one might express the uncertainty of a mean value by creating a confidence interval of the difference of a mean and standard deviation. We could express that deviation in an error bar, like such:</p>
<pre class="r"><code>library(ggplot2)
library(dplyr)
## 
## Attaching package: &#39;dplyr&#39;
## The following objects are masked from &#39;package:stats&#39;:
## 
##     filter, lag
## The following objects are masked from &#39;package:base&#39;:
## 
##     intersect, setdiff, setequal, union

iris_sum &lt;- iris %&gt;%
  group_by(Species) %&gt;%
  summarise(mean = mean(Petal.Length),
            sd = sd(Petal.Length))

g &lt;- ggplot(iris_sum, aes(Species, mean, fill = Species)) +
  geom_col() +
  geom_errorbar(aes(ymin = mean - sd, ymax = mean + sd), width = 0.2) +
  labs(y = &quot;Petal length&quot;) +
  theme_minimal()
g</code></pre>
<div class="figure"><span id="fig:error"></span>
<img src="/blog/hypothetical_outcome_plots_files/figure-html/error-1.png" alt="Error bars on Iris data" width="672" />
<p class="caption">
Figure 1: Error bars on Iris data
</p>
</div>
<p>While this creates clarity that there is <em>some</em> uncertainty, it might also convey that probabilistically the likelihood of this value can only fall in this bar and is equally likely to be any point within these bars. One might be able to better express this uncertainty by creating a violin plot of distributions of simualated or real values.</p>
<p>Say we ran a benchmark on two functions to test if one was faster than another. We could run it a few hundred times and create distributions of these two benchmarks and plot them:</p>
<pre class="r"><code>mb &lt;- microbenchmark(x, y, n = 50)
ggplot2::autoplot(mb) +
  theme_minimal()
</code></pre>
<p><img src="/img/distribution.png" /></p>
</div>
